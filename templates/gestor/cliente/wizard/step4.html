{% extends 'gestor/base_gestor.html' %}

{% block title %}Cliente - Objetivos e Estratégia | Portal Marketing{% endblock %}

{% block content %}
<div class="card shadow">
  <!-- Header com Progress Bar -->
  <div class="card-header bg-light">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h5 class="card-title mb-0">
        <i class="fas fa-target me-2"></i>
        Objetivos e Estratégia - {{ cliente.nome_empresa }}
      </h5>
      <div>
        <a href="{% url 'gestor:cliente_list' %}" class="btn btn-outline-secondary btn-sm">
          <i class="fas fa-arrow-left me-1"></i> Voltar
        </a>
      </div>
    </div>
    
    <!-- Progress Bar -->
    <div class="progress mb-3" style="height: 8px;">
      <div class="progress-bar bg-primary" role="progressbar" style="width: 66.66%" aria-valuenow="4" aria-valuemin="0" aria-valuemax="6"></div>
    </div>
    
    <!-- Steps Navigation -->
    <div class="d-flex justify-content-between text-center">
      <div class="flex-fill">
        <div class="badge bg-success rounded-pill mb-1">✓</div>
        <div class="small text-success">Básicas</div>
      </div>
      <div class="flex-fill">
        <div class="badge bg-success rounded-pill mb-1">✓</div>
        <div class="small text-success">Público</div>
      </div>
      <div class="flex-fill">
        <div class="badge bg-success rounded-pill mb-1">✓</div>
        <div class="small text-success">Posicionamento</div>
      </div>
      <div class="flex-fill">
        <div class="badge bg-primary rounded-pill mb-1">4</div>
        <div class="small fw-bold text-primary">Objetivos</div>
      </div>
      <div class="flex-fill">
        <div class="badge bg-light text-muted rounded-pill mb-1">5</div>
        <div class="small text-muted">Recursos</div>
      </div>
      <div class="flex-fill">
        <div class="badge bg-light text-muted rounded-pill mb-1">6</div>
        <div class="small text-muted">Revisão</div>
      </div>
    </div>
  </div>
  
  <div class="card-body">
    <form method="post" novalidate id="step4Form">
      {% csrf_token %}
      <input type="hidden" name="wizard_step" value="4">

      <!-- Seção: Objetivos de Marketing -->
      <div class="card shadow-sm mb-4">
        <div class="card-header bg-light">
          <h6 class="card-title mb-0">
            <i class="fas fa-bullseye me-2"></i>
            Objetivos de Marketing
          </h6>
        </div>
        <div class="card-body">
          <div class="row g-3">
            <div class="col-12">
              <label for="{{ form.objetivos_marketing.id_for_label }}" class="form-label">
                Objetivos de Marketing *
                {% if form.objetivos_marketing.errors %}<i class="fas fa-exclamation-triangle text-danger ms-1"></i>{% endif %}
              </label>
              {{ form.objetivos_marketing }}
              <div class="form-text">Quais são os objetivos de marketing da empresa?</div>
              {% if form.objetivos_marketing.errors %}
                <div class="text-danger small mt-1">
                  {% for error in form.objetivos_marketing.errors %}
                    <i class="fas fa-times-circle me-1"></i>{{ error }}
                  {% endfor %}
                </div>
              {% endif %}
            </div>
            
            <div class="col-12">
              <label for="{{ form.metas_especificas.id_for_label }}" class="form-label">
                Metas Específicas *
                {% if form.metas_especificas.errors %}<i class="fas fa-exclamation-triangle text-danger ms-1"></i>{% endif %}
              </label>
              {{ form.metas_especificas }}
              <div class="form-text">Metas mensuráveis e específicas que a empresa deseja alcançar</div>
              {% if form.metas_especificas.errors %}
                <div class="text-danger small mt-1">
                  {% for error in form.metas_especificas.errors %}
                    <i class="fas fa-times-circle me-1"></i>{{ error }}
                  {% endfor %}
                </div>
              {% endif %}
            </div>
            
            <div class="col-12">
              <label for="{{ form.kpis_empresa.id_for_label }}" class="form-label">
                KPIs da Empresa *
                {% if form.kpis_empresa.errors %}<i class="fas fa-exclamation-triangle text-danger ms-1"></i>{% endif %}
              </label>
              {{ form.kpis_empresa }}